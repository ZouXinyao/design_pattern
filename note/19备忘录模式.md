用来防丢失、撤销、恢复等

一、原理

在不违背封装原则的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，以便之后恢复对象为先前的状态。

- 存储副本以便后期恢复。
- 要在不违背封装原则的前提下，进行对象的备份和恢复。

二、实现

一般是用一个快照保存，如果想恢复对象，需要在类中实现set方法，但是我们想要的方法只有在数据恢复时使用，如果添加了set方法，外部也能调用了，就违背了封装。而且快照本身不允许改变，定义了set方法，违规使用会导致快照发生改变。

解决方法：新增一个快照类，快照类中没有set方法，快照和原对象不复用。set方法改名，使其用意更明确

三、优化内存和运行时间

要备份的对象数据比较大，备份频率又比较高，那快照占用的内存会比较大，备份和恢复的耗时会比较长。

1. 只备份必要的恢复信息，结合最新的数据来恢复；
2. 全量备份和增量备份相结合，低频全量备份，高频增量备份，两者结合来做恢复。