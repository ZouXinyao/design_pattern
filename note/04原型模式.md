一、原型模式原理

如果对象的创建成本比较大，而同一个类的不同对象之间差别不大（大部分字段都相同），在这种情况下，我们可以利用对已有对象（原型）进行复制（或者叫拷贝）的方式来创建新对象，以达到节省创建时间的目的。这种基于原型来创建对象的方式就叫作原型设计模式（Prototype Design Pattern），简称原型模式。

赋值、初始化、甚至申请内存等不会花费很多时间成本，但是如果一个对象通过网络传输，或者通过I/O读取，这时创建成本就比较大了。我们就可以利用原型模式，从其他已有对象中直接拷贝。

二、原型模式的两种实现方式

1、深拷贝和浅拷贝

浅拷贝和深拷贝的区别在于，浅拷贝只会复制指针，不会复制数据本身。深拷贝不仅仅会复制指针，还会复制数据本身。

浅拷贝得到的对象跟原始对象共享数据，而深拷贝得到的是一份完完全全独立的对象。

2、实现深拷贝的方法

第一种方法：递归拷贝对象、对象的引用对象以及引用对象的引用对象……直到要拷贝的对象只包含基本数据类型数据，没有引用对象为止。

第二种方法：先将对象序列化，然后再反序列化成新的对象。

3、原型模式中的深拷贝

先用浅拷贝创建1个新的对象，然后对于内部需要更新的对象单独使用深拷贝，然后替换。

4、慎用浅拷贝，因为新对象修改了1个字段，旧对象相应的值也会改变。

