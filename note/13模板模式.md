模板模式主要是用来解决复用和扩展两个问题。

一、原理

1、模板方法模式在一个方法中定义一个算法骨架，并将某些步骤推迟到子类中实现。模板方法模式可以让子类在不改变算法整体结构的情况下，重新定义算法中的某些步骤。

算法指的是业务逻辑；算法骨架指模板；包含算法骨架的方法就是“模板方法”

2、经典实现

在模板模式经典的实现中，模板方法定义为 final，可以避免被子类重写。需要子类重写的方法定义为 abstract，可以强迫子类去实现。

二、作用

1、复用

模板模式把一个算法中不变的流程抽象到父类的模板方法 templateMethod() 中，将可变的部分 method1()、method2() 留给子类 ContreteClass1 和 ContreteClass2 来实现。所有的子类都可以复用父类中模板方法定义的流程代码。

2、拓展，这里指的是框架的拓展性

模板模式常用在框架的开发中，让框架用户可以在不修改框架源码的情况下，定制化框架的功能。

三、回调函数

1、回调函数的定义

相对于普通的函数调用来说，回调是一种双向调用关系。

A 类事先注册某个函数 F 到 B 类，A 类在调用 B 类的 P 函数的时候，B 类反过来调用 A 类注册给它的 F 函数。这里的 F 函数就是“回调函数”。A 调用 B，B 反过来又调用 A，这种调用机制就叫作“回调”。

2、应用

通过三方支付系统来实现支付功能，用户在发起支付请求之后，一般不会一直阻塞到支付结果返回，而是注册回调接口（类似回调函数，一般是一个回调用的 URL）给三方支付系统，等三方支付系统执行完成之后，将结果通过回调接口返回给用户。

3、同步于异步

同步回调指在函数返回之前执行回调函数；

异步回调指的是在函数返回之后执行回调函数。

四、模板模式与回调

从应用场景上来看，同步回调跟模板模式几乎一致。它们都是在一个大的算法骨架中，自由替换其中的某个步骤，起到代码复用和扩展的目的；而异步回调跟模板模式有较大差别，更像是观察者模式。

回调基于组合关系来实现，把一个对象传递给另一个对象，是一种对象之间的关系；模板模式基于继承关系来实现，子类重写父类的抽象方法，是一种类之间的关系。

在代码实现上，回调相对于模板模式会更加灵活：模板模式中，java只有单继承，模板模式的子类只能继承1个模板父类；















