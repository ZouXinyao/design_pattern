实现状态机的方法有：分支逻辑，查表，状态模式

一、有限状态机(状态机)

1、定义

状态机有 3 个组成部分：状态（State）、事件（Event）、动作（Action）。其中，事件也称为转移条件（Transition Condition）。事件触发状态的转移及动作的执行。不过，动作不是必须的，也可能只转移状态，不执行任何动作。

相当于，1个对象在状态1时，出发了1个事件，就变成状态2了，然后执行相应的动作

2、状态转移图

每个状态通过特定的事件进行转换。同时执行相应的动作；

除了用状态转移图来表示之外，状态机还可以用二维表来表示，第一维表示当前状态，第二维表示事件，值表示当前状态经过事件之后，转移到的新状态及其执行的动作。

二、分支逻辑法实现状态机

参照状态转移图，将每一个状态转移，原模原样地直译成代码。

对于复杂的状态机来说，这种实现方式极易漏写或者错写某个状态转移。除此之外，代码中充斥着大量的 if-else 或者 switch-case 分支判断逻辑，可读性和可维护性都很差。

三、查表法

状态等都可以用表来表示，然后把这两个二维数组存储在配置文件中，当需要修改状态机时，我们甚至可以不修改任何代码，只需要修改配置文件就可以了。

局限性：状态、事件、动作等都比较简单时候可以用查表法，复杂时候就无法用数组表示。

四、状态模式

状态模式通过将事件触发的状态转移和动作执行，拆分到不同的状态类中，来避免分支判断逻辑。

五、适用场景

游戏这种比较复杂的状态机，包含的状态比较多，我优先推荐使用查表法，而状态模式会引入非常多的状态类，会导致代码比较难维护。

像电商下单、外卖下单这种类型的状态机，它们的状态并不多，状态转移也比较简单，但事件触发执行的动作包含的业务逻辑可能会比较复杂，所以，更加推荐使用状态模式来实现。