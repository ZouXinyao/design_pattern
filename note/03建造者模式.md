一、为什么要有建造者模式

假设创建对象需要很多参数，有的参数是必选项、有的是可选项。如何创建出我们需要的对象呢？

1、可选方案：使用构造函数，必选参数作为入参；然后使用set函数配置可选参数。

2、问题：

必选参数过多，到时构造函数的参数很多。

配置项有依赖关系，set方法的逻辑就比较复杂。

希望创建不可变对象，也就是有的参数配置后不可变，这时set函数最好不要存在。

二、建造者模式

可以把校验逻辑放置到 Builder 类中，先创建建造者，并且通过 set() 方法设置建造者的变量值，然后在使用 build() 方法真正创建对象之前，做集中的校验，校验通过之后才会创建对象。

然后把创建对象的类的构造函数设置成私有，这样就只能通过建造者创建这个对象了。而且原来的类还没有set方法。

优点：

如果使用先用构造函数再用set方法，这样在所有set运行结束之前，对象是无效的。使用建造者模式一次性创建好对象，就可以避免这个问题。

缺点：

代码优点重复，配置类中的成员变量在builder类中需要重复定义一遍。

三、建造者和工厂模式的区别

工厂模式是用来创建不同但是相关类型的对象（继承同一父类或者接口的一组子类），由给定的参数来决定创建哪种类型的对象。

建造者模式是用来创建一种类型的复杂对象，通过设置不同的可选参数，“定制化”地创建不同的对象。